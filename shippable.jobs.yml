jobs:

# Shell script infrastructure deployment to AWS
  - name: tfDeploy
    type: runSh
    steps:
      - IN: repo-tfScripts
      - IN: params-tfScripts
      - IN: integration-aws
      - IN: trigger-tf-deploy
      - TASK:
        - script: echo "provisioning infrastructure on AWS via Terraform"
      - on_success:
        - . /build/IN/repo-tfScripts/gitRepo/runTerraform.sh repo-tfScripts params-tfScripts integration-aws
        - . /saveState.sh
      - on_failure:
        . /build/IN/repo-tfScripts/gitRepo/runTerraform.sh repo-tfScripts params-tfScripts integration-aws
        - . /saveState.sh
